# <string>
def "print_bash_escape_seq" {
    print_string
    write_byte_to_stdout 27
} ;

# <string>
def "print_green_string" {
    print_bash_escape_seq "[0m"
    print_string
    print_bash_escape_seq "[0;32m"
} ;

# <string>
def "print_red_string" {
    print_bash_escape_seq "[0m"
    print_string
    print_bash_escape_seq "[0;31m"
} ;

# <test name> <test body>
def "run_test" {
   if { i } { print_green_string "OK\n" } { print_red_string "FAIL\n" }
   print_string ": "
   print_string
} ;


run_test "bit rshift" {
    and = 
        1
        bit_rshift 2 1
    and = 
        8
        bit_rshift 16 1
    and = 
        + 4 8
        bit_rshift + 16 32 2

        true
} ;

run_test "bit lshift" {
    and = 
        4
        bit_lshift 2 1
    and = 
        32
        bit_lshift 16 1
    and = 
        + 16 32
        bit_lshift + 4 8 2

        true
} ;

run_test "bit or" {
    and = 
        3
        bit_or 2 1
    and = 
        3
        bit_or 3 1

        true
} ;

run_test "bit and" {
    and = 
        4
        bit_and 7 4
    and = 
        1
        bit_and 3 1

        true
} ;

run_test "round_up_to_power_of_two" {
    and = 
        4
        round_up_to_power_of_two 3
    and = 
        0
        round_up_to_power_of_two 0
    and = 
        1
        round_up_to_power_of_two 1
    and = 
        128
        round_up_to_power_of_two 100

        true
} ;

exit 0 ;
